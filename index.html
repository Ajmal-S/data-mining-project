<!DOCTYPE html>
<html>
<title>Data Mining Project</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">
<script type="text/javascript" src="data.json"></script>
<body>

<!-- Header -->
<header class="w3-container w3-theme w3-padding" id="myHeader">
  <i onclick="w3_open()" class="fa fa-bars w3-xlarge w3-button w3-theme"></i> 
  <div class="w3-center">
  <h1 class="w3-xxxlarge w3-animate-bottom">Co Clustering Media And Tropes</h1>
  </div>
</header>
<div class="w3-container">
  <hr>
  <div class="w3-padding w3-white w3-display-container">
    <h2>Introduction</h2>
    <p>A common issue with ananlysing media is the general lack of a common set of features by which to analyze and classify works.
       This project looks at using data scraped from the website <a href="https://www.tvtropes.org">https://www.tvtropes.org</a> to analyze and cluster books and movies in the english language. TvTropes describes a tropes as:</p>
       <div class="w3-panel w3-leftbar w3-sand w3-serif">
        <p><i>"A trope is a storytelling device or convention, a shortcut for describing situations the storyteller can reasonably assume the audience will recognize."</i></p>
      </div> 
    <p>To put it simply a trope is a recognizable feature used in a story or work. This makes them an ideal avenue to analyse the media being described by. In this project english books and movies are clustered using the data on the tropes present in those books and movies scraped from their pages on the website.</p>
    <p>To consider the distribution of media and the relationships between the tropes as well, Co-Clustering or Bi-Clustering is used for the analysis. Three co-clustering algorithms are applied and the respective results are analysed. Each of the clustering results have been visualized to a force directed graph that supports zoom. The final section of this project are two interactive applications that make use of the clustered data to recommend one media based on another.</p>
  </div>
  <hr>
  <div class="w3-padding w3-white w3-display-container">
    <h2>Co-Clustering</h2>
    <p>
      Co-Clustering or Biclustering is a data mining technique which allows for the simultaneous clustering of the rows and columns of matrix like data. It is often applied to gene expression data. Three different co-clustering techniques are applied to the data, the generated clusters of media and tropes are analyzed from a statistical and qualitative standpoint. The trope clusters generated through the clustering is contrasted vs biclustering the tropes independent of the media they are representing by using a vectorized representation of their descriptions. 
    </p>    
    <br>
    <h3>Co-Clustering By Spectral Approximation of the Modularity Matirx</h3>
    <P>
      In 2001 Dhillon proposed an co-clustering algorithm that optimized modularity by applying bi-partite spectral graph partitioning to the data. <b>Spectral Graph Partitioning</b> is a heuristic based partitioning technique popularized in the 1990's. The technique is designed to focus partioning around diagonal clusters by mapping the data to a lower dimesion space and clustering within that space. The library selected for clustering implements a recent optimized implemetation on text based data proposed in 2011. 
    </P>
    <br>
    <h3>Co-Clustering By Direct Maximization of Graph Modularity</h3>
    <P>
      This is a diagonal clustering technique proposed by Ailem et al., that is available in the python library CoClust. It directly maximizes modularity by using an iterative alternating optimization procedure. 
    </P>
    <br>
    <h3>Information Theoretic Co-Clustering</h3>
    <P>
      A novel apporach to co-clustering by Dhillon, et al(2003). framed co-clustering as an optimization problem in information theory. This technique does not attempt to generate a diagonal structure of clustered elements. Instead the approach tries to maximize the mutual information between row and column clusters. In this approach the rows and columns are treated as random variables representing a joint probability distribution. The data is then clustered iteratively into the required number of partitions such that the loss in information in creating the partition is minimized. 
    </P>
  </div>
  <hr>
  <div class="w3-padding w3-white w3-display-container">
    <div class="w3-row-padding w3-center w3-margin-top">
        <h2>6 Clusters - Books</h2>
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 600px">
          <h3>Spectral Approximation</h3><br>
          <a href="Visualization/Spectral/Books6.html">
            <img src="Visualization/Spectral/bs6.png" alt="visualization of six book clusters with spectral approximation" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 1.08%</p>
          </div>
        </div>
        
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 600px">
          <h3>Direct Maximization</h3><br>
          <a href="Visualization/DirectMod/Books6.html">
            <img src="Visualization/DirectMod/bm6.png" alt="visualization of six book clusters with direct maximization" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 38.56%</p>
          </div>
        </div>
        
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 600px">
          <h3>Information Theoretic</h3><br>
          <a href="Visualization/InformationTheory/Books6.html">
            <img src="Visualization/InformationTheory/bi6.png" alt="visualization of six book clusters with information theory" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 15.26%</p>
          </div>
        </div>
      </div>
      <br>
      <div class="w3-row-padding w3-center w3-margin-top">
        <h2>6 Clusters - Movies</h2>
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Spectral Approximation</h3><br>
          <a href="Visualization/Spectral/Movies6.html">
            <img src="Visualization/Spectral/ms6.png" alt="visualization of six movie clusters with spectral approximation" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 62.95%</p>
          </div>
        </div>
        
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Direct Maximization</h3><br>
          <a href="Visualization/DirectMod/Movies6.html">
            <img src="Visualization/DirectMod/mm6.png" alt="visualization of six movie clusters with direct maximization" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 43.16%</p>
          </div>
        </div>
        
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Information Theoretic</h3><br>
          <a href="Visualization/InformationTheory/Movies6.html">
            <img src="Visualization/InformationTheory/mi6.png" alt="visualization of six movie clusters with information theory" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 17.80%</p>
          </div>
        </div>
      </div>
      <br>
      <div class="w3-row-padding w3-center w3-margin-top">
        <h2>8 Clusters - Books</h2>
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Spectral Approximation</h3><br>
          <a href="Visualization/Spectral/Books8.html">
            <img src="Visualization/Spectral/bs8.png" alt="visualization of eight book clusters with spectral approximation" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 87.72%</p>
          </div>
        </div>
        
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Direct Maximization</h3><br>
          <a href="Visualization/DirectMod/Books8.html">
            <img src="Visualization/DirectMod/bm8.png" alt="visualization of eight book clusters with direct maximization" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 34.39%</p>
          </div>
        </div>
        
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Information Theoretic</h3><br>
          <a href="Visualization/InformationTheory/Books8.html">
            <img src="Visualization/InformationTheory/bi8.png" alt="visualization of eight book clusters with information theory" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 12.33%</p>
          </div>
        </div>
      </div>
      <br>
      <div class="w3-row-padding w3-center w3-margin-top">
        <h2>8 Clusters - Movies</h2>
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Spectral Approximation</h3><br>
          <a href="Visualization/Spectral/Movies8.html">
            <img src="Visualization/Spectral/ms8.png" alt="visualization of eight movie clusters with spectral approximation" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 63.02%</p>
          </div>
        </div>
        
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Direct Maximization</h3><br>
          <a href="Visualization/DirectMod/Movies8.html">
            <img src="Visualization/DirectMod/mm8.png" alt="visualization of eight movie clusters with direct maximization" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 42.01%</p>
          </div>
        </div>
        
        <div class="w3-third">
          <div class="w3-card w3-container" style="min-height:460px; max-height: 700px">
          <h3>Information Theoretic</h3><br>
          <a href="Visualization/InformationTheory/Movies8.html">
            <img src="Visualization/InformationTheory/mi8.png" alt="visualization of eight movie clusters with information theory" style="width:100%;height:350px">
          </a>
          <p>Average percentage of connected tropes in the same cluster: 15.38%</p>
          </div>
        </div>
      </div>
  </div>
  <hr>
  <div class="w3-padding w3-white w3-display-container">
    <h2>Analysis and Conclusions</h2>
    <P>
      <b>Co-Clustering By Spectral Approximation of the Modularity Matirx: </b>Spectral Co-Clustering is primarily intended to make binary clusters. The clusters generate also indicate this with a majority of the media being added to one of two super clusters. This isn't useful for classifying media which falls under a wider collection of distinct categories. 
    </P>
    <br>
    <P>
      <b>Co-Clustering By Direct Maximization of Graph Modularity: </b> This approach produced the best clusters. Each cluster had a distinct set of elements and the emlements were well distributed along the cluster. This approach also generated an ideal clustering of the tropes where around 40% of the tropes present in a movie are part of the same cluster. This allows for diverse inferences and is demonstrated in the application section below. 
    </P>
    <br>
    <P>
      <b>Information Theoretic Co-Clustering: </b> This approach generated evenly distributed clusters but there was a reduced corelation between the tropes connected to a media and their cluster. The inferences drawn are also demonstrated in the application section. 
    </P>    
  </div>
  <hr>
  <h2 class="w3-center">Application - Recommendations</h2>
  <div class="w3-border">
    <div class="w3-bar w3-theme">
      <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openCity(event,'RecBook')">Books Recommendations</button>
      <button class="w3-bar-item w3-button testbtn w3-padding-16" onclick="openCity(event,'RecMovie')">Movie Recommendations</button>
    </div>

    <div id="RecBook" class="w3-container city w3-animate-opacity">
      <div class="w3-half">
          <form class="w3-container w3-card-4">
            <h3 class="w3-center">Input</h3>
            <div class="w3-row">
              <div class="w3-half">
                <input id="bookclst6" class="w3-radio" type="radio" name="clst" value="bookclst6" checked>
                <label>Six Clusters</label>
                <br>
                <input id="bookclst6" class="w3-radio" type="radio" name="clst" value="bookclst8">
                <label>Eight Clusters</label>
              </div>            
              <div class="w3-half">
                <input id="bookdmax" class="w3-radio" type="radio" name="algo" value="bookdmax" checked>
                <label>Direct Maximization</label>
                <br>
                <input id="bookitry" class="w3-radio" type="radio" name="algo" value="bookitry">
                <label>Information Theory</label>
              </div>
            </div>
            <br>
            <div class="w3-row">  
              <button class="w3-btn w3-theme w3-border w3-border-green w3-round-large w3-small" id="AddMediaBooks">Add Media</button>
              <button class="w3-btn w3-theme w3-border w3-border-green w3-round-large w3-small" id="RecommendBooks">Recommend Books</button>
              <button class="w3-btn w3-theme w3-border w3-border-green w3-round-large w3-small" id="ClearBooks">Clear</button>     
              <br>              
              <input id="mybooks" class="w3-input w3-rest" type="text">              
            </div>
            <div class="w3-section">
              <ul id="AddedMediaBooks" class="w3-ul w3-margin-bottom">
              </ul>
            </div>            
          </form>
        </div>
        <div class="w3-half">
        <div class="w3-card-4 w3-container">
          <h3 class="w3-center">Recommendations</h3>
          <ul id="RecommendedBooks"class="w3-ul w3-margin-bottom">
          </ul>
        </div>
      </div>
    </div>

    <div id="RecMovie" class="w3-container city w3-animate-opacity">
      <div class="w3-half">
        <form class="w3-container w3-card-4">
          <h3 class="w3-center">Input</h3>
          <div class="w3-row">
            <div class="w3-half">
              <input id="moviesclst6" class="w3-radio" type="radio" name="clst" value="moviesclst6" checked>
              <label>Six Clusters</label>
              <br>
              <input id="moviesclst6" class="w3-radio" type="radio" name="clst" value="moviesclst8">
              <label>Eight Clusters</label>
            </div>            
            <div class="w3-half">
              <input id="moviesdmax" class="w3-radio" type="radio" name="algo" value="moviesdmax" checked>
              <label>Direct Maximization</label>
              <br>
              <input id="moviesitry" class="w3-radio" type="radio" name="algo" value="moviesitry">
              <label>Information Theory</label>
            </div>
          </div>
          <br>
          <div class="w3-row">  
            <button class="w3-btn w3-theme w3-border w3-border-green w3-round-large w3-small" id="AddMediaMovies">Add Media</button>
            <button class="w3-btn w3-theme w3-border w3-border-green w3-round-large w3-small" id="RecommendMovies">Recommend Books</button>
            <button class="w3-btn w3-theme w3-border w3-border-green w3-round-large w3-small" id="ClearMovies">Clear</button>     
            <br>              
            <input class="w3-input w3-rest" type="text">              
          </div>
          <div class="w3-section">
            <ul id="AddedMediaMovies" class="w3-ul w3-margin-bottom">
            </ul>
          </div>            
        </form>
      </div>
      <div class="w3-half">
      <div class="w3-card-4 w3-container">
        <h3 class="w3-center">Recommendations</h3>
        <ul id="RecommendedMovies"class="w3-ul w3-margin-bottom">
        </ul>
      </div>
    </div>
    </div>
  </div>
</div>

<!-- Script for Sidebar, Tabs, Accordions, Progress bars and slideshows -->
<script>
function autocomplete(inp, arr1, arr2) {
  /*the autocomplete function takes two arguments,
  the text field element and an array of possible autocompleted values:*/
  var currentFocus;
  /*execute a function when someone writes in the text field:*/
  inp.addEventListener("input", function(e) {
      var a, b, i, val = this.value;
      /*close any already open lists of autocompleted values*/
      closeAllLists();
      if (!val) { return false;}
      currentFocus = -1;
      /*create a DIV element that will contain the items (values):*/
      a = document.createElement("DIV");
      a.setAttribute("id", this.id + "autocomplete-list");
      a.setAttribute("class", "autocomplete-items");
      /*append the DIV element as a child of the autocomplete container:*/
      this.parentNode.appendChild(a);
      /*for each item in the array...*/
      for (i = 0; i < arr.length; i++) {
        /*check if the item starts with the same letters as the text field value:*/
        if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
          /*create a DIV element for each matching element:*/
          b = document.createElement("DIV");
          /*make the matching letters bold:*/
          b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
          b.innerHTML += arr[i].substr(val.length);
          /*insert a input field that will hold the current array item's value:*/
          b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
          /*execute a function when someone clicks on the item value (DIV element):*/
          b.addEventListener("click", function(e) {
              /*insert the value for the autocomplete text field:*/
              inp.value = this.getElementsByTagName("input")[0].value;
              /*close the list of autocompleted values,
              (or any other open lists of autocompleted values:*/
              closeAllLists();
          });
          a.appendChild(b);
        }
      }
  });
  /*execute a function presses a key on the keyboard:*/
  inp.addEventListener("keydown", function(e) {
      var x = document.getElementById(this.id + "autocomplete-list");
      if (x) x = x.getElementsByTagName("div");
      if (e.keyCode == 40) {
        /*If the arrow DOWN key is pressed,
        increase the currentFocus variable:*/
        currentFocus++;
        /*and and make the current item more visible:*/
        addActive(x);
      } else if (e.keyCode == 38) { //up
        /*If the arrow UP key is pressed,
        decrease the currentFocus variable:*/
        currentFocus--;
        /*and and make the current item more visible:*/
        addActive(x);
      } else if (e.keyCode == 13) {
        /*If the ENTER key is pressed, prevent the form from being submitted,*/
        e.preventDefault();
        if (currentFocus > -1) {
          /*and simulate a click on the "active" item:*/
          if (x) x[currentFocus].click();
        }
      }
  });
  function addActive(x) {
    /*a function to classify an item as "active":*/
    if (!x) return false;
    /*start by removing the "active" class on all items:*/
    removeActive(x);
    if (currentFocus >= x.length) currentFocus = 0;
    if (currentFocus < 0) currentFocus = (x.length - 1);
    /*add class "autocomplete-active":*/
    x[currentFocus].classList.add("autocomplete-active");
  }
  function removeActive(x) {
    /*a function to remove the "active" class from all autocomplete items:*/
    for (var i = 0; i < x.length; i++) {
      x[i].classList.remove("autocomplete-active");
    }
  }
  function closeAllLists(elmnt) {
    /*close all autocomplete lists in the document,
    except the one passed as an argument:*/
    var x = document.getElementsByClassName("autocomplete-items");
    for (var i = 0; i < x.length; i++) {
      if (elmnt != x[i] && elmnt != inp) {
        x[i].parentNode.removeChild(x[i]);
      }
    }
  }
  /*execute a function when someone clicks in the document:*/
  document.addEventListener("click", function (e) {
      closeAllLists(e.target);
  });
}

/*An array containing all the country names in the world:*/
var countries = ["Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua & Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia & Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central Arfrican Republic","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cuba","Curacao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauro","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","North Korea","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre & Miquelon","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","St Kitts & Nevis","St Lucia","St Vincent","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L'Este","Togo","Tonga","Trinidad & Tobago","Tunisia","Turkey","Turkmenistan","Turks & Caicos","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"];
/*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/
autocomplete(document.getElementById("mybooks"), countries);
/*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/
// Side navigation
function w3_open() {
  var x = document.getElementById("mySidebar");
  x.style.width = "100%";
  x.style.fontSize = "40px";
  x.style.paddingTop = "10%";
  x.style.display = "block";
}
function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
}

// Tabs
function openCity(evt, cityName) {
  var i;
  var x = document.getElementsByClassName("city");
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
  var activebtn = document.getElementsByClassName("testbtn");
  for (i = 0; i < x.length; i++) {
    activebtn[i].className = activebtn[i].className.replace(" w3-dark-grey", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " w3-dark-grey";
}

var mybtn = document.getElementsByClassName("testbtn")[0];
mybtn.click();

// Accordions
function myAccFunc(id) {
  var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else { 
    x.className = x.className.replace(" w3-show", "");
  }
}

// Slideshows
var slideIndex = 1;

function plusDivs(n) {
  slideIndex = slideIndex + n;
  showDivs(slideIndex);
}

function showDivs(n) {
  var x = document.getElementsByClassName("mySlides");
  if (n > x.length) {slideIndex = 1}    
  if (n < 1) {slideIndex = x.length} ;
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";  
  }
  x[slideIndex-1].style.display = "block";  
}

showDivs(1);

// Progress Bars
function move() {
  var elem = document.getElementById("myBar");   
  var width = 5;
  var id = setInterval(frame, 10);
  function frame() {
    if (width == 100) {
      clearInterval(id);
    } else {
      width++; 
      elem.style.width = width + '%'; 
      elem.innerHTML = width * 1  + '%';
    }
  }
}
</script>

</body>
</html>
